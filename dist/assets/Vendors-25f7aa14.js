import{_ as v,C as y,T as D,A as p,E as _,D as V,r as m,o as a,e as b,w as l,a as t,L as C,H as f,J as g,B as i,i as r,c as h,F as k,g as E,t as w,G as S,f as B}from"./index-2123eb2d.js";import{_ as U}from"./edit-6400a45e.js";const q={name:"EditVendor",props:["selectedVendor","editModal"],components:{TheModal:y,TheButton:D},data(){return{fromData:{_id:"",name:"",description:""}}},methods:{editVendor(){this.editing=!0,p.editVendor(this.fromData).then(e=>{_(e),this.$parent.editModal=!1,this.$parent.getAllVendors()}).catch(e=>{V(e)}).finally(()=>{this.$parent.editModal=!1})}},mounted(){this.fromData._id=this.selectedVendor._id,this.fromData.name=this.selectedVendor.name,this.fromData.description=this.selectedVendor.description}},F=t("label",{class:"block"},"Vendor Name",-1),L=t("label",{class:"block mt-3"},"Description",-1);function W(e,d,N,T,u,s){const c=m("the-button"),M=m("TheModal");return a(),b(M,{modelValue:e.$parent.editModal,"onUpdate:modelValue":d[3]||(d[3]=n=>e.$parent.editModal=n),heading:"Edit vendor"},{default:l(()=>[t("form",{onSubmit:d[2]||(d[2]=C((...n)=>s.editVendor&&s.editVendor(...n),["prevent"]))},[F,f(t("input",{type:"text",placeholder:"Enter vendor name",class:"mt-1 w-100",required:"","onUpdate:modelValue":d[0]||(d[0]=n=>u.fromData.name=n)},null,512),[[g,u.fromData.name]]),L,f(t("input",{type:"text",placeholder:"Write Short Description",class:"mt-31 w-100",required:"","onUpdate:modelValue":d[1]||(d[1]=n=>u.fromData.description=n)},null,512),[[g,u.fromData.description]]),i(c,{loading:e.editing,class:"w-100 mt-4"},{default:l(()=>[r(" Save Changes ")]),_:1},8,["loading"])],32)]),_:1},8,["modelValue"])}const j=v(q,[["render",W]]),G={data:()=>({addModal:!1,deleteModal:!1,editModal:!1,newVendor:{name:"",description:""},selectedVendor:{},deleting:!1,editing:!1,adding:!1,vendors:[],gettingVendors:!1}),components:{TheButton:D,TheModal:y,EditVendor:j},mounted(){setTimeout(this.getAllVendors,100)},methods:{handelEdit(e){this.selectedVendor=e,this.editModal=!0},resetForm(){this.newVendor={name:"",description:""}},getAllVendors(){this.gettingVendors=!0,p.getVendors().then(e=>{this.vendors=e.data}).catch(e=>{V(e)}).finally(()=>{this.gettingVendors=!1})},addNew(){console.log(localStorage.getItem("accessToken")),this.adding=!0,p.addVendor(this.newVendor).then(e=>{_(e),this.addModal=!1,this.resetForm(),this.getAllVendors()}).catch(e=>{V(e)}).finally(()=>{this.adding=!1})},deleteVendor(){this.deleting=!0,p.deleteVendor(this.selectedVendor._id).then(e=>{_(e),this.deleteModal=!1,this.getAllVendors()}).catch(e=>{V(e)}).finally(()=>{this.deleting=!1})}}},H={class:"d-flex jc-between ai-center"},I=t("h2",null,"All vendors",-1),J={key:0,class:"text-center"},Y={key:1,class:"mt-4"},z=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Description"),t("th",null,"Action")])],-1),K=["onClick"],O=["onClick"],P=t("label",{class:"block"},"Vendor Name",-1),Q=t("label",{class:"block mt-3"},"Description",-1);function R(e,d,N,T,u,s){const c=m("TheButton"),M=m("the-button"),n=m("TheModal"),A=m("edit-vendor");return a(),h(k,null,[t("div",H,[I,i(c,{onClick:d[0]||(d[0]=o=>e.addModal=!0)},{default:l(()=>[r("Add New")]),_:1})]),e.gettingVendors?(a(),h("div",J,"Loading...")):(a(),h("table",Y,[z,t("tbody",null,[(a(!0),h(k,null,E(e.vendors,o=>(a(),h("tr",{key:o.name},[t("td",null,w(o.name),1),t("td",null,w(o.description),1),t("td",null,[t("img",{src:U,alt:"",class:"action-icon",onClick:$=>s.handelEdit(o)},null,8,K),t("img",{src:S,alt:"",class:"action-icon action-icon--delete ml-3",onClick:$=>{e.selectedVendor=o,e.deleteModal=!0}},null,8,O)])]))),128))])])),i(n,{modelValue:e.addModal,"onUpdate:modelValue":d[4]||(d[4]=o=>e.addModal=o),heading:"Add New Vendor"},{default:l(()=>[t("form",{onSubmit:d[3]||(d[3]=C((...o)=>s.addNew&&s.addNew(...o),["prevent"]))},[P,f(t("input",{type:"text",placeholder:"Enter vendor name",class:"mt-1 w-100",required:"","onUpdate:modelValue":d[1]||(d[1]=o=>e.newVendor.name=o)},null,512),[[g,e.newVendor.name]]),Q,f(t("input",{type:"text",placeholder:"Write Short Description",class:"mt-31 w-100",required:"","onUpdate:modelValue":d[2]||(d[2]=o=>e.newVendor.description=o)},null,512),[[g,e.newVendor.description]]),i(M,{loading:e.adding,class:"w-100 mt-4"},{default:l(()=>[r(" Add ")]),_:1},8,["loading"])],32)]),_:1},8,["modelValue"]),e.selectedVendor&&e.editModal?(a(),b(A,{key:2,selectedVendor:e.selectedVendor,editModal:e.editModal},null,8,["selectedVendor","editModal"])):B("",!0),i(n,{modelValue:e.deleteModal,"onUpdate:modelValue":d[6]||(d[6]=o=>e.deleteModal=o),heading:"Are you sure?"},{default:l(()=>[t("p",null,[r(" Do you really want to delete? "),t("strong",null,w(e.selectedVendor.name),1)]),i(c,{class:"mt-4",onClick:s.deleteVendor,loading:e.deleting},{default:l(()=>[r("Yes")]),_:1},8,["onClick","loading"]),i(c,{class:"ml-3",color:"gray",onClick:d[5]||(d[5]=o=>e.deleteModal=!1)},{default:l(()=>[r("No")]),_:1})]),_:1},8,["modelValue"])],64)}const x=v(G,[["render",R]]);export{x as default};
